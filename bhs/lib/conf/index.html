<!doctype html><html lang=en><head><meta charset=utf-8><title>itnomater :: Library conf</title><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1"><meta name=date content="2023-03-16 12:35"><meta name=generator content="https://gohugo.io"><meta name=robots content="index,follow"><meta name=description content="Easy-to-use configuration management of bash scripts."><meta http-equiv=content-security-policy content="default-src 'self' 'nonce-flicker-prevent'; style-src 'self' 'unsafe-inline';"><link rel=alternate type=application/rss+xml href=http://itnomater.github.io/rss.xml title=itnomater><link rel=stylesheet href=/css/bundle.css><script src=/js/bundle.min.js></script></head><body class=theme><div id=font-sizes class=hidden><span class=font-size-small></span>
<span class=font-size-medium></span>
<span class=font-size-large></span>
<span class=font-size-huge></span></div><script nonce=flicker-prevent>let theme=localStorage.getItem("functional.theme")||"light",font_size=localStorage.getItem("functional.fontSize")||"medium";document.body.classList.add("theme-"+(theme==="light"?"light":"dark"));let def_fonts=document.getElementById("font-sizes"),font_size_px=window.getComputedStyle(document.getElementsByClassName("font-size-"+font_size)[0],null).getPropertyValue("font-size");document.getElementsByTagName("html")[0].style.fontSize=font_size_px</script><a id=anchor-top name=top></a><header><div><aside id=configbox><div id=configbox-cover></div><button id=action-configbox-toggle>&#9881;</button><div id=configbox-content class=theme><button id=action-configbox-close class=theme>&#215;</button><hr><div id=agree-functional class=hidden><div><button id=action-set-font-small class="theme action-font-set-size font-size-small" data-value=small><span>A</span></button>
<button id=action-set-font-medium class="theme action-font-set-size font-size-medium" data-value=medium><span>A</span></button>
<button id=action-set-font-large class="theme action-font-set-size font-size-large" data-value=large><span>A</span></button>
<button id=action-set-font-huge class="theme action-font-set-size font-size-huge" data-value=huge><span>A</span></button>
<button id=action-theme-switcher><div class=theme-inverse>a</div></button></div><hr><div><button id=action-agree-toggle class="link collapse" data-id=#box-agreements>Your agreements</button><div id=box-agreements class=hidden><p>You agreed to store your settings on your computer.<br>You can revoke it if you want. Your settings will be lost.<br><button id=action-agree-revoke class=link title="Revoke agree">&#215; Revoke my agreed</button></p></div></div></div><div id=disagree-functional><p>If you want to keep your settings like font size and color theme,<br>you must agree to store these data on your computer.<br><button id=action-agree-aprove class=link title="Aprove agree">&#x2714;Yes, I agree</button></p></div></div></aside><div id=live-coding></div><h1>itnomater</h1><h2>Bash Helpers System</h2><nav id=menubar><ul><li><a href=/ title><span class=font-adjust>home</span></a></li><li><a href=/bhs title><span class=font-adjust>about</span></a></li><li><a href=/bhs/lib title><span class=font-adjust>libraries</span></a></li><li><a href=/bhs/bin title><span class=font-adjust>binaries</span></a></li><li><a href=https://github.com/itnomater/bhs title><span class=font-adjust>source code</span></a></li></ul></nav></div><nav id=breadcrumbs class=theme><button class=theme id=action-menu-open>&#9776;</button><ul><li><a href=/ title>Home</a></li><li><a href=/bhs/ title>BHS</a></li><li><a href=/bhs/lib/ title>Libraries</a></li><li>conf</li></ul></nav></header><main><aside id=side-menu><div id=side-menu-cover></div><div id=side-menu-content class=theme><button class=theme id=action-menu-close>&#215;</button><h5>Functions</h5><nav><ul><li><a href=http://itnomater.github.io/bhs/lib/conf/conf_load/>conf_load</a></li><li><a href=http://itnomater.github.io/bhs/lib/conf/conf_is/>conf_is</a></li><li><a href=http://itnomater.github.io/bhs/lib/conf/conf_get/>conf_get</a></li><li><a href=http://itnomater.github.io/bhs/lib/conf/conf_set/>conf_set</a></li><li><a href=http://itnomater.github.io/bhs/lib/conf/conf_clear/>conf_clear</a></li></ul></nav></div></aside><article><h1 id=anchor-top-article>Library conf</h1><p>Easy-to-use configuration management of bash scripts.</p><p>Separate your code from configuration.
No more global variables in your bash scripts.
All configuration are stored in dedicated config files.</p><h2 id=functions>Functions</h2><p>You can use the following functions:</p><ul><li><a href=/bhs/lib/conf/conf_load>conf_load</a> - Load the configuration from the file.</li><li><a href=/bhs/lib/conf/conf_is>conf_is</a> - Check if the configuration variable exist.</li><li><a href=/bhs/lib/conf/conf_get>conf_get</a> - Print the config variable value.</li><li><a href=/bhs/lib/conf/conf_set>conf_set</a> - Set the value of the configuration variable.</li><li><a href=/bhs/lib/conf/conf_clear>conf_clear</a> - Remove (clear) the configuration variable.</li></ul><h2 id=configuration-file-structure>Configuration file structure</h2><p>The configuration structure is very simple. There are pairs <em>key=value</em>.
Variable names can contain only <em>letters</em>, <em>underscores</em>, <em>dashes</em> or <em>digits</em>.
Variable values can contain any characters. You can use quotes or not.</p><p class=warning>Multiple white spaces in the configuration variable values will be reduced to one.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>key1</span><span class=o>=</span>val1
</span></span><span class=line><span class=cl><span class=nv>key2</span><span class=o>=</span>val2 with spaces
</span></span><span class=line><span class=cl><span class=nv>key3</span><span class=o>=</span><span class=s2>&#34;val3 with spaces&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>key4</span><span class=o>=</span><span class=s1>&#39;val4 with spaces&#39;</span>
</span></span></code></pre></div><p>Additionally, you can split variables into sections. Sections are placed in square brackets.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>section1<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>key1</span><span class=o>=</span>val1
</span></span></code></pre></div><p>Section name can be followed by <em>#</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#[section2]</span>
</span></span><span class=line><span class=cl><span class=nv>key1</span><span class=o>=</span>val1
</span></span></code></pre></div><h2 id=loading-the-library>Loading the library</h2><p>After loading this library, the function <code>conf_init</code> will be called automatically with the proper script name as an argument.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># This script is named `foobar.sh`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>. <span class=si>${</span><span class=nv>SHELL_BOOTSTRAP</span><span class=si>}</span>
</span></span><span class=line><span class=cl>lib conf      <span class=c1># It will try to load the config file from ${SHELL_CONFDIR}/foobar.conf.ini</span>
</span></span></code></pre></div><p class=warning>Sometimes the automatic loading of the configuration file may fail, if the proper script uses any other dependencies to the <code>conf</code> library.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># This script is named `foobar.sh`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>. <span class=si>${</span><span class=nv>SHELL_BOOTSTRAP</span><span class=si>}</span>
</span></span><span class=line><span class=cl>lib lang      <span class=c1># Lang library uses conf library. This will load the `conf` library without proper argument.</span>
</span></span><span class=line><span class=cl>lib conf      <span class=c1># This won&#39;t load the `conf` library again.</span>
</span></span></code></pre></div><p>So that, the <code>conf</code> library should be loaded first. Alternatively, you can call function <code>conf_load</code> manually.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>conf_load <span class=s1>&#39;/path/to/configfile&#39;</span>
</span></span></code></pre></div><h2 id=under-the-hood>Under the hood</h2><p>The configuration variables are split into sections.
Each section is a global variable like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>___<span class=o>{</span>namespace<span class=o>}</span>_<span class=o>{</span>section_name<span class=o>}</span>      
</span></span></code></pre></div><p>The <code>namespace</code> is set when the configuration file is loaded. As default is <code>CONF</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>conf_load <span class=s1>&#39;/path/to/config&#39;</span>             <span class=c1># Load the data into the default namespace named &#39;CONF&#39;.</span>
</span></span></code></pre></div><p>You can change it if you have multiple configuration files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>conf_load <span class=s1>&#39;/path/to/config&#39;</span> foo      <span class=c1># Load the data into the custom namespace named &#39;foo&#39;.</span>
</span></span><span class=line><span class=cl>conf_load <span class=s1>&#39;/path/to/config&#39;</span> bar      <span class=c1># Load the data into the custom namespace named &#39;bar&#39;.</span>
</span></span><span class=line><span class=cl>conf_load <span class=s1>&#39;/path/to/config&#39;</span> doe      <span class=c1># Load the data into the custom namespace named &#39;doe&#39;.</span>
</span></span></code></pre></div><p>But you probably won&rsquo;t need to change it.</p></article></main><footer id=navigation class=theme><nav><div><hr><a class=nav-parent href=/bhs/lib/ title=Libraries><span class=hidden320>Libraries</span></a></div><div><a class=nav-prev href=http://itnomater.github.io/bhs/lib/rand/ title="Library rand"><span class=hidden320>Library rand</span></a><hr><a class=nav-next href=/bhs/lib/conf/conf_load/ title="Function conf_load"><span class=hidden320>Function conf_load</span></a></div></nav><a id=nav-top class=theme href=#top title="On top">&#x21ea</a></footer></body></html>