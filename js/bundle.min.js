class Page{static code_sheet=null;static init(){this.code_sheet=new CodeSheet($$("#live-coding")),Agreed.init(),this.Prefs.init(),this.Menu.init(),this.Configbox.init(),this.Navigate.init(),window.addEventListener("mousemove",function(){Page.coding()})}static coding(){this.code_sheet.coding()}static Menu={init:function(){$$("#side-menu")!==null&&($$("#action-menu-open").addEventListener("click",Page.Menu.open),$$("#action-menu-close").addEventListener("click",Page.Menu.close),$$("#side-menu").addEventListener("click",Page.Menu.close))},open:function(){$$("#side-menu").classList.add("opened")},close:function(){$$("#side-menu").classList.remove("opened")}};static Configbox={init:function(){document.getElementById("action-configbox-close").addEventListener("click",Page.Configbox.close),$$("#action-configbox-toggle")!==null&&($$("#action-configbox-toggle").addEventListener("click",Page.Configbox.toggle),$$("#configbox-cover").addEventListener("click",Page.Configbox.close))},open:function(){$$("#configbox").classList.add("opened")},close:function(){$$("#configbox").classList.remove("opened")},toggle:function(){$$("#configbox").classList.toggle("opened")}};static Prefs={init:function(){let t=["action-set-font-small","action-set-font-medium","action-set-font-large","action-set-font-huge"],e="";for(e of t)$$(`#${e}`).addEventListener("click",function(){let e=this.getAttributeNode("data-value").value;Page.Prefs.setFontSize(e)});$$("#action-theme-switcher").addEventListener("click",function(){Page.Prefs.setTheme()});let n=Storage.get("theme","light"),s=Storage.get("fontSize","medium");this.setFontSize(s),this.setTheme(n)},setFontSize:function(e){let n=$$("#configbox-content").getElementsByClassName("action-font-set-size"),t="";for(t of n)t.getAttributeNode("data-value").value===e?(t.classList.add("active"),$$("html")[0].style.fontSize=window.getComputedStyle(t,null).getPropertyValue("font-size")):t.classList.remove("active");Storage.set("fontSize",e)},setTheme:function(e){let t=document.body;(e==null)&&(e=Storage.get("theme","light"),e=e==="light"?"dark":"light"),e==="dark"?(t.classList.remove("theme-light"),t.classList.add("theme-dark")):(t.classList.add("theme-light"),t.classList.remove("theme-dark")),Storage.set("theme",e)}};static Navigate={init:function(){window.addEventListener("scroll",function(){let e=$$("main")[0].getElementsByTagName("h2"),t=window.pageYOffset;for(let n=e.length-1;n>=0;--n)if(t>=e[n].offsetTop){Page.Navigate.selectTOC(e[n].id);break}}),window.innerWidth<520&&$$("#anchor-top-article").scrollIntoView({block:"start"}),$$("html")[0].classList.add("smooth-scroll");let e=$$(".collapse");for(let t of e)t.addEventListener("click",function(){$$(this.getAttribute("data-id")).classList.toggle("hidden")})},selectTOC:function(e){let n=$$("#main-table-of-content"),t="";if(n)for(t of n.getElementsByTagName("li"))e===t.getElementsByTagName("a")[0].href.replace(/^.*#/,"")?t.classList.add("active"):t.classList.remove("active")}}}class Agreed{static#def_pool="functional";static init(){$$("#action-agree-aprove").addEventListener("click",function(){Agreed.aprove()}),$$("#action-agree-revoke").addEventListener("click",function(){Agreed.revoke(),window.location.reload()}),this.check()?this.aprove():this.revoke()}static aprove(e=this.#def_pool){window.localStorage.setItem(`agreed.$${e}`,"yes"),$$(`#agree-${e}`).classList.remove("hidden"),$$(`#disagree-${e}`).classList.add("hidden")}static revoke(e=this.#def_pool){Storage.remove(`agreed.$${e}`),Storage.clear(e),$$(`#agree-${e}`).classList.add("hidden"),$$(`#disagree-${e}`).classList.remove("hidden")}static check(e=this.#def_pool){return Storage.check(`agreed.$${e}`,"yes")}}class Storage{static#def_pool="functional";static#not_agreed_message="No agreed for store %s data.";static remove(e){window.localStorage.removeItem(e)}static clear(e=this.#def_pool){for(let t in window.localStorage)t.startsWith(`${e}.`)&&window.localStorage.removeItem(t)}static set(e,t){let n=this.#splitKey(e,this.#def_pool);e=`${n.pool}.${n.key}`,isset(t)?Agreed.check(n.pool)?window.localStorage.setItem(e,t):console.warn(this.#not_agreed_message,e):window.localStorage.removeItem(e)}static get(e,t=""){let n=this.#splitKey(e,this.#def_pool);return e=`${n.pool}.${n.key}`,window.localStorage.getItem(e)||t}static check(e,t){let n=this.#splitKey(e,this.#def_pool);return e=`${n.pool}.${n.key}`,isset(t)?window.localStorage.getItem(e)===t:window.localStorage.getItem(e)!==null}static#splitKey(e,t=this.#def_pool){if(!isset(e))return"";let n=e.indexOf(".");return n>0&&(t=e.substring(0,n),e=e.substring(n+1)),{key:e,pool:t}}}class CodeSheet{static code_max_lines=20;static code_max_indent=5;notepad=null;code_stack=[];code_stack_lines=[];curr_line=null;curr_line_content="";constructor(e){this.notepad=e,this.addLine()}getIndentLevel(){return this.code_stack.length}getLinesCount(){return this.code_stack_lines.length?this.code_stack_lines[this.code_stack_lines.length-1]:0}indent(e){this.code_stack.push(e),this.code_stack_lines.push(0)}unindent(){this.code_stack.pop(),this.code_stack_lines.pop()}addLine(e){let n=$$("<p>");this.getIndentLevel()>0&&n.classList.add("indent"+this.getIndentLevel()),this.curr_line=n,this.notepad.appendChild(n);let s=this.notepad.getElementsByTagName("p");s.length>CodeSheet.code_max_lines&&s[0].remove();let t="";isset(e)||(this.getIndentLevel()?this.getIndentLevel()>=CodeSheet.code_max_indent?e=GenData.getNoIndentTag():GenData.probe(this.getIndentLevel()*.01+this.getLinesCount()*.01)?e=GenData.getNoIndentTag():e=GenData.getIndentTag():e=GenData.getRootTag()),isset(e.prefix)&&(t+=e.prefix),isset(e.content)&&(t+=GenData.get(e.content)),isset(e.sufix)&&(t+=e.sufix),this.curr_line_content=t,isset(e.indent)&&e.indent&&this.getIndentLevel()<CodeSheet.code_max_indent&&this.indent(e),this.code_stack_lines.length>0&&this.code_stack_lines[this.code_stack_lines.length-1]++}coding(){if(window.pageYOffset<160)if(this.curr_line_content.length)this.curr_line.textContent+=this.curr_line_content[0],this.curr_line_content=this.curr_line_content.substring(1);else{let e=this.getIndentLevel(),t=0;this.getIndentLevel()&&(t=GenData.probe(e*.06+this.code_stack_lines[e-1]*.1)),this.getIndentLevel()&&this.getLinesCount()>=3&&t?(this.unindent(),this.addLine(GenData.getTag("block_close"))):this.addLine()}}}class GenData{static#code_tags={block_if:{indent:1,new_line:1,prefix:"if (",content:"{condition}",sufix:") {",after:[{tag:"block_elseif",prob:.4},{tag:"block_else",prob:.3}]},block_elseif:{indent:1,content:"else if",sufix:" (",after:[{tag:"block_elseif",prob:.4},{tag:"block_else",prob:.3}]},block_else:{indent:1,content:"else if",sufix:" ("},block_switch:{indent:1,content:"switch",sufix:" (",after:{tag:"switch_variable",prob:1}},block_for:{indent:1,prefix:"for (",content:"{for_condition}",sufix:") {",new_line:1},block_while:{indent:1,prefix:"while (",sufix:") {",content:"{condition}",new_line:1},block_function:{indent:1,prefix:"function (",content:"{arguments}",sufix:") {",new_line:1},expression:{content:"{expression}",new_line:1},variable:{content:"{variable}",new_line:1},blank_line:{new_line:1},block_close:{unindent:1,new_line:1,content:"}"}};static#_code0="aWYgKCFpc3NldChhcmcpKSBjb25zb2xlLndhcm4oIk5vIGFyZ3VtZW50Iik7IGVsc2UgaWYgKGFyZy5sZW5ndGggPT0gNDApIGNvbnNvbGUud2FybigiT25seSB0aGUgZmlyc3QgOCBjaGFyYWN0ZXJzIHBsZWFzZSA6KSIpOyBlbHNlIHsgc3dpdGNoIChhcmcpIHsgY2FzZSAiYmFkZmJkYzciOiBjYXNlICJhYmMwZDE4ZiI6IGNvbnNvbGUud2FybigiV2l0aG91dCBuZXcg";static#root_tags=[this.#code_tags.expression,this.#code_tags.variable,this.#code_tags.blank_line,this.#code_tags.block_if,this.#code_tags.block_for,this.#code_tags.block_while,this.#code_tags.block_function];static#indent_tags=[this.#code_tags.expression,this.#code_tags.variable,this.#code_tags.blank_line,this.#code_tags.block_if,this.#code_tags.block_for,this.#code_tags.block_while];static#noindent_tags=[this.#code_tags.expression,this.#code_tags.variable,this.#code_tags.blank_line];static#root_tags_probs=[0,1,2,3,4,5,6,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,0,1,2,0,1,0,1,0,1,0,1,0,1,0,0,0];static#indent_tags_probs=[0,1,2,3,4,5,6,0,1,2,3,4,5,0,1,3,4,5,0,1,3,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0];static#noindent_tags_probs=[0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,0,1,0,1,0,0,0];static#input_data=["You","etiam","are","himenaeos","so","elementum","curious","tincidunt","right?","That","pellentesque","is","luctus","good","dictumst","Me","risus","too","There","ultrices","is","sodales","something","ultrices","like","neque","easter","metus","egg","finibus","for","dignissim","people","enim","who","pretium","like","erat","to","ante","know","what","sapien","is","aptent","under","rutrum","the","torquent","hood","First","feugiat","I","aliquam","generated","potenti","a","table","viverra","with","gravida","random","scelerisque","words","Lorem","Ipsum","Dolor","And","next","added","a","few","words","for","myself","How","pellentesque","many","people","luctus","can","read","ultrices","this?","sapien","At","aptent","torquent","this","rutrum","rutrum","moment","torquent","you","sapien","aptent","can","do","etiam","himenaeos","lorem","1.","metus","calculate","SHA1","hash","sodales","from","string: BHS","ultrices","erat","ante","dictumst","2.","enim","get","ante","only","neque","the","torquent","first","eight","gravida","characters","tincidunt","3.","run","elementum","the","static","method","viverra","_secret","of","gravida","GenData","class","with","aptent","rutrum","above","8 characters","metus","as","sodales","the","argument"];static#operators_rel=["=","!=",">",">=","<","<="];static#operators_ar=["+","-","/","*"];static#def_keywords=["let","var","const"];static#_code1="bGluZSBjaGFyYWN0ZXIgcGxlYXNlIDopIik7IGJyZWFrOyBjYXNlICI5Mjc5YjY4MiI6IGNvbnNvbGUud2FybigiVXBwZXIgbGV0dGVycyBwbGVhc2UgOikiKTsgYnJlYWs7IGNhc2UgIjFmODhlNzgxIjogY29uc29sZS5pbmZvKCJHcmF0cyEgVGhhdFwncyBhbGwgYXQgdGhlIG1vbWVudC4iKTsgYnJlYWs7IGRlZmF1bHQ6IGNvbnNvbGUud2FybigiSW52YWxpZCBjb2RlIik7IH0gfQo=";static get(e,t){if(isset(e))if(e.match(/^{[a-zA-Z_]+}$/)){let t=e.replace(/^{([a-zA-Z_]+)}$/,"$1");switch(t){case"condition":return`${this.get(null,3)} ${this.#operators_rel[parseInt(Math.random()*999%this.#operators_rel.length)]} ${this.get(null,3)}`;case"variable":return`${this.#def_keywords[parseInt(Math.random()*999%this.#def_keywords.length)]} ${this.get(null,3)} = "${this.get(null,2)}";`;case"arguments":let e="";for(var n=0;n<parseInt(Math.random()*8888)%3;++n)e+=this.get(null,2)+", ";return e+=this.get(null,2),e;case"for_condition":return`let i = 0; i < ${parseInt(Math.random()*8888)%1e3}; ++i`;case"expression":return`${this.#def_keywords[parseInt(Math.random()*999%this.#def_keywords.length)]} ${this.get(null,3)} = "${this.get(null,3)}";`}}else return e;else{if(isset(t)){let e="";for(let n=0;n<t;++n)e+=this.#input_data[parseInt(Math.random()*1e3)%this.#input_data.length];return e}return this.#input_data[parseInt(Math.random()*1e3)%this.#input_data.length]}}static getTag(e){return isset(e)&&isset(this.#code_tags[e])?this.#code_tags[e]:this.#code_tags[parseInt(Math.random()*3333)%this.#code_tags.length]}static getIndentTag(){let e=this.#indent_tags_probs[parseInt(Math.random()*8888%this.#indent_tags_probs.length)];return this.#indent_tags[e%this.#indent_tags.length]}static getNoIndentTag(){let e=this.#noindent_tags_probs[parseInt(Math.random()*8888%this.#noindent_tags_probs.length)];return this.#noindent_tags[e%this.#noindent_tags.length]}static getRootTag(){let e=this.#root_tags_probs[parseInt(Math.random()*8888%this.#root_tags_probs.length)];return this.#root_tags[e%this.#root_tags.length]}static probe(e){return!!isset(e)&&e!=0&&(e>=100||e==1||(e<1&&(e*=100),(parseInt(Math.random()*99999)%1024&127)<=parseInt(127*e/100)))}static _secret(){eval(atob(this.#_code0+this.#_code1))}static#_ticket="kk"}if(typeof $$=="undefined")function $$(e){let t=null;if(typeof e=="string"){switch(e[0]){case".":t=document.getElementsByClassName(e.substring(1))||null;break;case"#":t=document.getElementById(e.substring(1))||null;break;case"<":t=document.createElement(e.substring(1,e.length-1))||null;break;default:t=document.getElementsByTagName(e)||null;break}return t||(t=document.createElement("div")),t}}function isset(e){return typeof e!="undefined"&&e!=null}document.addEventListener("DOMContentLoaded",function(){Page.init()})